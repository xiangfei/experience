## 阿里云安装k8s

-  阿里云的公网ip 没有直接绑定在服务器。
-  默认安装策略禁止外网访问


### kubeadmin 安装 

- 使用内网ip


###  配置远程访问

- 本地kubeadm.conf 文件




```bash

[root@aliyun-supetext-dingding-k8s-master ~]# cat /root/.kube/config 
apiVersion: v1
clusters:
- cluster:
    certificate-authority-data: ...
    server: https://10.255.0.81:6443
  name: kubernetes
contexts:
- context:
    cluster: kubernetes
    user: kubernetes-admin
  name: kubernetes-admin@kubernetes
current-context: kubernetes-admin@kubernetes
kind: Config
preferences: {}
users:
- name: kubernetes-admin
  user:
    client-certificate-data: ...
    client-key-data: ....

```


- 需要增加iptables 策略
  - 也可以在路由器，修改路由策略


```bash
[root@aliyun-supetext-dingding-k8s-master ~]# cat rule.txt 
# Generated by iptables-save v1.4.21 on Thu Jul 14 11:04:06 2022
*nat
:PREROUTING ACCEPT [448:18494]
:INPUT ACCEPT [3:694]
:OUTPUT ACCEPT [20:1346]
:POSTROUTING ACCEPT [27:1766]
-A OUTPUT -d 10.255.0.81/32 -j DNAT --to-destination 47.111.86.114
COMMIT
# Completed on Thu Jul 14 11:04:06 2022

```